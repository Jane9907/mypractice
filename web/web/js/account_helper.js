!function(a){
    function b(){

    }
    function c(){
        this.passwordData=[],
            this.init();
    }
    var d=a.MutationObserver||a.WebKitMutationObserver,e=document,f=new d(function(a){
        var b=a.some(function(a){
            var b,c;switch(a.type){
                case"attributes":b=a.target.querySelector('input[type="password"][data-form-pw]'),b=b&&/^(style|class)$/i.test(a.attributeName)&&a.target.querySelector('input[data-form-un="'+b.getAttribute("data-form-pw")+'"]')?!b.value:!1;break;default:c=g.toArray(a.addedNodes),b=c.some(function(a){return"OBJECT"===a.nodeName?!1:a.querySelector&&a.querySelector('input[type="password"]')
                })
            }return b
        });
        b&&(h.init(),h.find(),h.hasAccount()&&h.hasPasswordData()&&h.fill())});f.observe(e,{
        childList:!0,subtree:!0,attributes:!0
    }),b.prototype={
        toArray:function(a){for(var b=[],c=0,d=a.length;d>c;c++)"object"==typeof a[c]&&b.push(a[c]);return b
        }
    },c.prototype={init:function(){this.formEltArr=[],this.inputList=g.toArray(document.querySelectorAll("input"))},find:function(){
        var a=g.toArray(document.querySelectorAll('input[type="password"]')),b=this;a.forEach(function(a,c){var d,e,f={};b.isHasMorePasswordElt(a)||(d=b.findUsernameElt(a),d&&(f.usernameElt=d.id?"#"+d.id:d.name?'[name="'+d.name+'"]':"",f.passwordElt=a.id?"#"+a.id:a.name?'[name="'+a.name+'"]':"",a.form?(f.hasForm=!0,e=b.findSubmitElt(a.form)):(f.hasForm=!1,e=b.findSubmitElt(document,a)),b.formEltArr.push(f),b.markForm(a,d,e)))})},isHidden:function(b){for(;b;){if("none"==a.getComputedStyle(b,null).getPropertyValue("display"))return!0;b=b.parentElement}return!1},findUsernameElt:function(a){for(var b,c=this.inputList.indexOf(a);c>0&&(b=this.inputList[--c],!b||!/text|email|tel/i.test(b.type)||b.form!=a.form||this.isHidden(b)!=this.isHidden(a));)b=null;return b},isHasMorePasswordElt:function(a){var b=(this.inputList.length,this.inputList.indexOf(a)),c=this.inputList[b-1],d=this.inputList[b+1];return c&&"password"===c.type||d&&"password"===d.type?!0:!1},findSubmitElt:function(a,b){var c,d=null;if("FORM"==a.nodeName){if(d=a.querySelector('[type="submit"]'))return d;c=g.toArray(a.querySelectorAll("a, button"));for(var e=0;e<c.length;e++)if(/login/i.test(c[e].id)||/login/i.test(c[e].className))return c[e];return a.querySelector('input[type="button"]')}c=g.toArray(a.querySelectorAll("a[node-type]"));for(var e=0;e<c.length;e++)if(/submit/i.test(c[e].getAttribute("node-type")))return c[e];c=g.toArray(a.querySelectorAll('input[type="button"]'));for(var e=0;e<c.length;e++)if(/login/i.test(c[e].id))return c[e];return d},markForm:function(a,b,c){var d=this,e=Date.now()+Math.random()+"";a.getAttribute("data-form-pw")||(a.setAttribute("data-form-pw",e),b.setAttribute("data-form-un",e),c&&(c.setAttribute("data-form-sbm",e),c.addEventListener("click",function(){d.isNotBlank(this.getAttribute("data-form-sbm"))&&i.postMessage({cmd:"isUpdate",passwordElt:a.id?"#"+a.id:a.name?'[name="'+a.name+'"]':"",passwordValue:a.value.trim(),usernameElt:b.id?"#"+b.id:b.name?'[name="'+b.name+'"]':"",usernameValue:b.value.trim()})},!1)))},hasAccount:function(){return this.formEltArr.length?!0:!1},isNotBlank:function(a){var b=document.querySelector('[data-form-pw="'+a+'"]'),c=document.querySelector('[data-form-un="'+a+'"]');return b.value.trim()&&c.value.trim()?!0:!1},setData:function(a){this.passwordData=a||[]},hasPasswordData:function(){return this.passwordData.length?!0:!1},fill:function(){var a=this,b=this.passwordData,c=g.toArray(document.querySelectorAll("[data-form-pw]")),d=!1;c.forEach(function(c){var e=c.getAttribute("data-form-pw"),f=document.querySelector('[data-form-un="'+e+'"]');a.isHidden(c)||a.isHidden(f)||b.some(function(b){var e,g;return e=c.id?"#"+c.id:c.name?'[name="'+c.name+'"]':"",g=f.id?"#"+f.id:f.name?'[name="'+f.name+'"]':"",b.passwordElt==e&&b.usernameElt==g?(a.fillDeal(c,f,b.passwordValue,b.usernameValue,400),d=!0):(e=c.id?c.id.split(/[_-]/)[0]:"",g=f.id?f.id.split(/[_-]/)[0]:"",new RegExp("^#"+e,"i").test(b.passwordElt)&&new RegExp("^#"+g,"i").test(b.usernameElt)?(a.fillDeal(c,f,b.passwordValue,b.usernameValue,400),d=!0):void 0)})});var e,f;if(!(d||c[0].form&&c[0].form.action)){if(e=c[0],f=document.querySelector('[data-form-un="'+e.getAttribute("data-form-pw")+'"]'),a.isHidden(e)||a.isHidden(f))return;a.fillDeal(e,f,b[0].passwordValue,b[0].usernameValue,400)}},specifyFill:function(a,b){var c=document.querySelector('[data-form-pw="'+b+'"]'),d=document.querySelector('[data-form-un="'+b+'"]');this.fillDeal(c,d,a.passwordValue,a.usernameValue)},fillDeal:function(a,b,c,d,e){var f=function(){a.value=c,a.setAttribute("style",a.getAttribute("style")?a.getAttribute("style")+";background:#FAFFBD !important;box-shadow:none;":"background:#FAFFBD !important;box-shadow:none;"),b.value=d,b.setAttribute("style",b.getAttribute("style")?b.getAttribute("style")+";background:#FAFFBD !important;box-shadow:none;":"background:#FAFFBD !important;box-shadow:none;")};e?setTimeout(f,e):f()},pop:function(){var a,b,c;a=document.activeElement.getAttribute("data-form-pw")||document.activeElement.getAttribute("data-form-un"),a&&h.isNotBlank(a)&&(b=document.querySelector('[data-form-pw="'+a+'"]'),c=document.querySelector('[data-form-un="'+a+'"]'),i.postMessage({cmd:"isUpdate",formAction:b.form?b.form.action||"":"",passwordElt:b.id?"#"+b.id:b.name?'[name="'+b.name+'"]':"",passwordValue:b.value.trim(),usernameElt:c.id?"#"+c.id:c.name?'[name="'+c.name+'"]':"",usernameValue:c.value.trim()}))}};var g=new b,h=new c,i=chrome.extension.connect({name:"accountHelper"});i.postMessage({cmd:"get"}),i.onMessage.addListener(function(a){switch(a.cmd){case"fill":h.setData(a.passwordData),h.hasAccount()&&h.hasPasswordData()&&h.fill();break;case"specifyFill":h.specifyFill(a.data,a.stamp);break;case"submit":h.pop()}}),i.postMessage({cmd:"isPop"}),document.addEventListener("mousedown",function(a){if(2===a.button){var b,c=!1;"INPUT"==a.target.nodeName&&(b=a.target.getAttribute("data-form-pw")||a.target.getAttribute("data-form-un")||!1,c=b&&h.isNotBlank(b),i.postMessage({cmd:"flushMenu",saveEnabled:c,fillEnabled:b?!0:!1,hostURL:location.hostname,stamp:b}))}},!0),document.addEventListener("input",function(a){var b,c=a.target;(c.getAttribute("data-form-pw")||c.getAttribute("data-form-un"))&&(b=c.style.cssText,b=b.replace(/background[^;]+(;|$)/gi,"").replace(/box\-shadow[^;]+(;|$)/gi,""),c.style.cssText=b)},!1),setTimeout(function(){h.init(),h.find(),h.hasAccount()&&h.hasPasswordData()&&h.fill()},1e3)}(window);